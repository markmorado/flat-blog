{% extends "themes/clean/base.html" %}
{% block content %}
<h1 class="title">Посты</h1>
<p>
  <a class="btn" href="{{ url_for('admin.new_post') }}"><i class="ri-add-line"></i> Новый пост</a>
  <a class="btn" href="{{ url_for('admin.logout') }}"><i class="ri-logout-box-line"></i> Выйти</a>
</p>
<table class="table">
  <thead><tr><th>Заголовок</th><th>Дата</th><th>Теги</th><th class="right">Действия</th></tr></thead>
  <tbody>
  {% for p in posts %}
    <tr>
      <td><a href="{{ p.url() }}" target="_blank">{{ p.title }}</a></td>
      <td>{% if p.date %}{{ p.date.date() }}{% endif %}</td>
      <td>{{ ', '.join(p.tags) }}</td>
      <td class="right">
        <a class="btn" href="{{ url_for('admin.edit_post', slug=p.slug) }}">Редактировать</a>
        <form action="{{ url_for('admin.delete_post', slug=p.slug) }}" method="post" style="display:inline" onsubmit="return confirm('Удалить?')">
          <button class="btn" type="submit">Удалить</button>
        </form>
      </td>
    </tr>
  {% else %}
    <tr><td colspan="4">Постов пока нет.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
